---
title: "Influence of Party Affiliation on Reported Voting Difficulty"
author: "Kevin Lustig, Rebecca Nissan, Anuradha Passan, Giorgio Soggiu"
date: "2/29/2022"
output:
  pdf_document:
    toc: true
    number_sections: true
    toc_depth: 3
---

  \newpage
\setcounter{page}{1}

```{r setup and load packages, include=FALSE}

options(tinytex.verbose = TRUE)
knitr::opts_chunk$set(echo=FALSE, message=FALSE)

library(tidyverse)
library(magrittr)
library(knitr)
library(ggpubr)
library(ggplot2)
```

```{r load data, include=FALSE}
source("data_wrangling.R")
```

```{r echo=FALSE}
data_fin_reduced <- data_fin %>% select(party, diff_index, diff_subj)
data_fin_reduced <- data_fin_reduced %>% filter(data_fin_reduced$party == 'D' | data_fin_reduced$party == 'R')

# splitting the dataset in two 
sub_dem <- data_fin_reduced[data_fin_reduced$'party' == 'D', ]
sub_rep <- data_fin_reduced[data_fin_reduced$'party' == 'R', ]

```

# Importance and Context

The topic of obstacles to voting has been the focus of considerable discussion in the United States in recent years, including notably before, during, and since the 2020 federal election. The debate over the facility with which Americans are able to vote has elicited claims both that voting in practice is too restrictive and challenging to allow for participation by all would-be voters and contrarily that it is so open and unrestricted that fraudulent voting can and does occur with limited recourse. Perhaps unsurprisingly, these assertions have largely arisen along partisan lines, and have been used as evidence in support of (often contradictory) changes to voting laws by elected officials and their supporters in both major political parties. Those affiliated with the Democratic Party are more likely to feel that it is too difficult to vote and support efforts to increase access to the polls, while Republican Party supporters are more likely to support restrictions on voting access. Naturally, the partisan nature of this debate means that voting behavior itself has been impacted, for example with Democratic voters significantly more likely to vote early and by mail than Republican voters in 2020, both methods widely discussed as fraught with error and likely to be fraudulent by prominent members of the Republican party. 

Naturally, this raises the question of whether the actual experience of difficulty voting is related as well to party affiliation. Perhaps attitudes toward measures to loosen or tighten voting regulations are driven by real or perceived differences in personal experience with voting difficulty. This analysis therefore attempts to examine the linkage, if any, between political party identification and difficulty voting. We seek to address the following research question: 

*Did Democrats or Republicans have more difficulty voting in the 2020 election?

This question has the potential to illuminate important aspects of the debate on measures to change voting laws. Namely, is it possible that Democrat-associated policies to ease voting regulations are based on an actual increased level of difficulty voting for Democrats as compared to Republicans (and likewise for Republican efforts to further restrict voting?) What is the scale of the actual voting difficulty for members of each party, and who would be most affected and in what way by changes meant to address the current ease or difficulty of voting? 

# Data and Methodology

```{r plot diff_index, echo=FALSE}
# diff_index distribution for Democrats
gghistogram(sub_dem$diff_index, bins = 6, fill= 'steelblue', xlab = 'Total instances of difficulty reported', main = 'Difficulty Index: Democrats')
```
```{r echo=FALSE}
# diff_index distribution for Republicans
gghistogram(sub_rep$diff_index, bins = 6, fill= 'steelblue', xlab = 'Total instances of difficulty reported',  main = 'Difficulty Index: Republicans')
```
```{r echo=FALSE}
# diff_subj distribution for Democrats
gghistogram(sub_dem$diff_subj, bins = 2, fill= 'steelblue', xlab = 'Had/did not have difficulty voting', main = 'Self-Reported Difficulty: Democrats')

```
```{r echo=FALSE}
# diff_subj distribution for Republicans
gghistogram(sub_dem$diff_subj, bins = 2, fill= 'steelblue', xlab = 'Had/did not have difficulty voting', main = 'Self-Reported Difficulty: Republicans')

```
```{r make summary table} 
summary_table <- data_fin_reduced %>% 
  mutate(
    party = case_when(
      party == "D" ~ 'Democract', 
      party == "R" ~ 'Republican'), 
    difficulty = case_when(
      diff_subj == 1 ~ 'Reported difficulty', 
      diff_subj != 1 ~ 'Did not report difficulty')) %$% 
  prop.table(
    table(
      party, 
      difficulty))
```

```{r summary-table}
kable(
  summary_table,
  digits = 2,
  caption = 'Self-Reported Voting Difficulty (regardless of vote cast)', 
  booktabs = TRUE, 
)
```

# Results

As discussed, we analyze two aspects of voting difficulty. First, we compare the mean incidence of types of difficulty reported by Democrat- and Republican-identified voters who cast a vote in the 2020 election: 

```{r echo=TRUE}
t.test(diff_index~party,alternative = "two.sided",data = data_fin_reduced )
```

The result of this test provides no evidence that there is a significant difference in reported experience of voting difficulty based on political identification (t=1.2208,p=0.2222). Democrats reported a mean experience of .2807 incidents of voting difficulty, while Republicans reported a mean of .2628 incidents. These figures are both influenced heavily by the fact that, as previously shown, a large majority of all voters of both parties reported no difficulty voting. 

Because questions about individual types of voting difficulty were not asked of voters who did not ultimately cast a vote, these voters did not have the opportunity to provide the same data on the number of types of difficulty they experienced, though in fact it is possible that a high level of difficulty may have been the cause of their inability to vote. Therefore, we further analyze a secondary variable which records whether a registered voter reported difficulty whether they voted or not. 

```{r echo=TRUE}
t.test(diff_subj~party,alternative = "two.sided",data = data_fin_reduced )
```

```{r echo=FALSE}
data_fin_no_vote_difficulty = data_fin %>% filter(voter_post_vote_status_V202068x == 1 & diff_subj == 1 & (party == "R" | party == "D"))
```

The results of this test are similar to the first in that they do not provide evidence that there is a difference in the voting difficulty experienced between the two parties even when considering voters who experienced difficulty and did not cast a vote (t=-.73054,p=.4651). This is not unexpected given that registered voters who did not cast a vote after having experienced difficulty voting make up only a very small portion of all Republican and Democratic voters (132 voters).  

It is important to note some key limitations of this approach given that it looks across all voters captured in the ANES dataset. Factors that are not considered in this analysis are quite likely to have an impact on the experience of voting difficulty. Among these is method of voting; voting through different methods may in fact be a strategy by individual voters to address anticipated difficulty voting (especially in a 2020 election cycle made more challenging by the COVID-19 pandemic.) Additionally, voters in different locations may have different experiences of voting difficulty given that elections are administered differently across state and local jurisdictions. Further analysis that attempts to analyze differences across methods and locations would be a valuable addition to these findings. 

Finally, it is critical to note that the method of questioning voters in the ANES survey asks only for self-reported and therefore subjective descriptors of difficulty. It does not attempt to validate or weight these incidents. Thus, this study does not attempt to analyze an objective measure of how difficult the voting experience was for any voter. In reality, one voter may find three types of difficulty a mere inconvenience, while another may experience significant challenges casting their vote while reporting only one kind of difficulty. While ANES does ask voters to describe the overall level of difficulty voters had at the polls, it does not ask this of voters who attempted to but did not vote. Different survey data than that found in the ANES dataset will be needed to form a clearer and less subjective picture of the nature of obstacles voters face at the polls. 

# Discussion

Our analysis finds that the incidence of voting difficulty is quite low in general and does not appear to be significantly different between supporters of the major political parties. Our results are consistent when analyzing the degree of difficulty experienced by those who cast a vote and the presence or absence of difficulty experienced by registered voters regardless of whether they ultimately were able to cast a vote.

This study suggests a number of interesting questions that merit further research. Are there significant differences in the kind or amount of difficulty faced by just those voters who did experience difficulty? Do Democrat and Republican voters report or experience different kinds of difficulty at different rates? Does the incidence of difficulty voting change from election to election? We believe our results are most interesting in the context of these and other answers in helping to form an evidence base for ongoing debates about voting access. The right mix of policy solutions for changing (or preserving) current voting practices depends on an understanding of the real ease or difficulty of voting, and particularly whether some groups find voting to be more or less accessible to them than other groups do. We hope that our findings can help to point the way toward additional answers that will contribute to effective and evidence-based policy-making that ensures fair access to the polls for all voters with a minimum of obstacles. 



### Working code

```{r echo=FALSE}
# splitting the dataset in two 
sub_dem <- data_fin[data_fin$'party' == 'D', ]
sub_rep <- data_fin[data_fin$'party' == 'R', ]
```

```{r echo=FALSE}
# diff_index distribution for Democrats
gghistogram(sub_dem$diff_index, bins = 6, fill= 'steelblue', xlab = 'Difficulty index', main = 'Difficulty Index: Democrats')
```

```{r echo=FALSE}
# diff_index distribution for Republicans
gghistogram(sub_rep$diff_index, bins = 6, fill= 'steelblue', xlab = 'Difficulty index',  main = 'Difficulty Index: Republicans')

```
### Code: Wilcoxon
#### coding style 1
```{r echo=FALSE}

# is R ranking automatically the values?
#-> yes: same value when calculating:
#   wilcox.test(sort(sub_dem$diff_index), sort(sub_rep$diff_index), alternative = "two.sided", paired = FALSE, conf.int = TRUE)
#   wilcox.test(sub_dem$diff_index, sub_rep$diff_index, alternative = "two.sided", paired = FALSE, conf.int = TRUE)

# alt="two.sided"
# conf.level = ... ? what is the confidence interval we would like?
# do not need and exact p value -> normal approximation of the p value (by default) is used then
# conf.int = TRUE to get : "median of the difference between a sample x and a sample from y"


# what is the wilcox.test argument that differentiate a wilcoxon test under mean hypothesis than wilcoxon test under comparison hypothesis?-> mu=0?

wilcox.test(sub_dem$diff_index, sub_rep$diff_index, mu = 0,  alternative = "two.sided", paired = FALSE, conf.int = TRUE)
```
#### coding style 2
```{r echo=FALSE}
data_fin_reduced <- data_fin %>% select(party, diff_index)
data_fin_reduced <- data_fin_reduced %>% filter(data_fin_reduced$party == 'D' | data_fin_reduced$party == 'R')
```

```{r echo=FALSE}
wilcox.test(diff_index~party,mu = 0,alternative = "two.sided", paired = FALSE, conf.int = TRUE, data = data_fin_reduced )
```

### Code: t-test


```{r echo=FALSE}
# one assumption for the t-test (old version) is: similar variances
# to check if variances from diff_index (democrats) and diff_index (republicans) are similar: use of the F-test
var.test(diff_index~party, data = data_fin_reduced)
```
- ratio of variances different than one.
- lower and upper bounds (from the confidence interval) are higher than 1
-> variances are really different
-> not sure we can use the t-test (old version) then,  nevertheless we can use the Welch's version of the t-test (apparently, default test in R)

```{r echo=FALSE}
t.test(diff_index~party,alternative = "two.sided", paired = FALSE, conf.int = TRUE, data = data_fin_reduced )
```

## Considering diff_subj

### Which test to use?

paired/unpaired?
- we are using two random variables: diff_subj affiliated to Republicans and diff_index associated to Democrats.
- Republicans and Democrats are two different populations
-> unpaired

parametric/non parametric?
- data distrbution is not normal
-> non parametric test

distributions:
-distri of diff_index_rep and diff_index_dem are really similar 

data type?
- diff_subj is binary /not metric
->  Wilcoxon again
->  independent sample t test?

### Hypothesis

null hypothesis of comparisons
H0:P(diff_subj_dem<diff_subj_dem) = P(diff_subj_dem>diff_subj_dem)

### Code Wilcoxon

```{r echo=FALSE}
data_fin_reduced_subj <- data_fin %>% select(party, diff_subj)
data_fin_reduced_subj <- data_fin_reduced_subj %>% filter(data_fin_reduced_subj$party == 'D' | data_fin_reduced_subj$party == 'R')
```

```{r echo=FALSE}
# no mu this time as it is a (2) hypothesis
wilcox.test(diff_subj~party,alternative = "two.sided", paired = FALSE, conf.int = TRUE, data = data_fin_reduced_subj )
```


